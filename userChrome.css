/* Zen Browser - Sidebar Hover Expand
 * Expands the collapsed sidebar on hover to show tab titles
 */

:root {
    --hover-width: 230px;
    --hover-transition: 200ms cubic-bezier(0.4, 0.0, 0.2, 1);
}

/* Base sidebar setup - keeps it positioned and prevents content jump */
:root:not([zen-sidebar-expanded="true"]) #navigator-toolbox {
    position: relative !important;
    z-index: 100 !important;
    transition: max-width var(--hover-transition), min-width var(--hover-transition) !important;
}

/* Expand the sidebar when hovering */
:root:not([zen-sidebar-expanded="true"]) #navigator-toolbox:hover {
    max-width: var(--hover-width) !important;
    min-width: var(--hover-width) !important;
    padding: var(--zen-toolbox-padding) !important;
    padding-left: 0 !important;
    padding-top: 0 !important;
    box-shadow: 2px 0 8px rgba(0, 0, 0, 0.15) !important;
}

/* Make tab titles visible */
:root:not([zen-sidebar-expanded="true"]) #navigator-toolbox:hover .tabbrowser-tab .tab-label-container {
    display: flex !important;
    opacity: 1 !important;
    visibility: visible !important;
    flex: 1 !important;
}

:root:not([zen-sidebar-expanded="true"]) #navigator-toolbox:hover .tabbrowser-tab .tab-text,
:root:not([zen-sidebar-expanded="true"]) #navigator-toolbox:hover .tabbrowser-tab .tab-label {
    display: inline !important;
    opacity: 1 !important;
    visibility: visible !important;
}

/* Expand tab backgrounds to fill width */
:root:not([zen-sidebar-expanded="true"]) #navigator-toolbox:hover .tabbrowser-tab .tab-background {
    margin-inline: var(--tab-block-margin) !important;
    width: -moz-available !important;
    transition: width var(--hover-transition), margin var(--hover-transition) !important;
}

/* Adjust spacing for tab icons */
:root:not([zen-sidebar-expanded="true"]) #navigator-toolbox:hover .tabbrowser-tab .tab-icon-image,
:root:not([zen-sidebar-expanded="true"]) #navigator-toolbox:hover .tabbrowser-tab .tab-icon-pending,
:root:not([zen-sidebar-expanded="true"]) #navigator-toolbox:hover .tabbrowser-tab .tab-throbber {
    margin-inline-end: var(--toolbarbutton-inner-padding) !important;
    margin-inline-start: calc(var(--toolbarbutton-inner-padding) / 4) !important;
}

/* Center tab content properly */
:root:not([zen-sidebar-expanded="true"]) #navigator-toolbox:hover .tabbrowser-tab:not([zen-essential]) .tab-content {
    display: flex !important;
    align-items: center !important;
    padding: 0 var(--tab-inline-padding) !important;
    width: 100% !important;
    min-width: 0 !important;
}

:root:not([zen-sidebar-expanded="true"]) #navigator-toolbox:hover .tabbrowser-tab {
    --tab-inline-padding: 8px !important;
}

/* Show workspace name in header */
:root:not([zen-sidebar-expanded="true"]) #navigator-toolbox:hover .zen-current-workspace-indicator-name {
    display: flex !important;
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    opacity: 0.7 !important;
    font-weight: 600 !important;
    align-items: center !important;
}

/* Adjust workspace indicator layout */
:root:not([zen-sidebar-expanded="true"]) #navigator-toolbox:hover .zen-current-workspace-indicator {
    padding: calc(2px + var(--tab-inline-padding) + var(--zen-toolbox-padding)) !important;
    gap: 10px !important;
    align-items: center !important;
    flex-direction: row !important;
    max-width: 100% !important;
    width: 100% !important;
    max-height: var(--zen-workspace-indicator-height) !important;
    min-height: var(--zen-workspace-indicator-height) !important;
    height: var(--zen-workspace-indicator-height) !important;
    overflow: hidden !important;
}

/* Show text labels on toolbar buttons */
:root:not([zen-sidebar-expanded="true"]) #navigator-toolbox:hover .toolbarbutton-text {
    display: flex !important;
    align-items: center !important;
}

/* Top buttons styling */
:root:not([zen-sidebar-expanded="true"]) #navigator-toolbox:hover #zen-sidebar-top-buttons-customization-target > :is(toolbaritem, toolbarbutton) {
    padding-left: var(--tab-inline-padding) !important;
    padding-right: var(--tab-inline-padding) !important;
    width: 100% !important;
}

:root:not([zen-sidebar-expanded="true"]) #navigator-toolbox:hover #zen-sidebar-top-buttons-customization-target > :is(toolbaritem, toolbarbutton) label {
    display: flex !important;
    width: 100% !important;
}

/* Show workspace button text */
:root:not([zen-sidebar-expanded="true"]) #navigator-toolbox:hover #zen-workspaces-button .zen-workspace-sidebar-name {
    display: block !important;
}

/* Layout for bottom buttons */
:root:not([zen-sidebar-expanded="true"]) #navigator-toolbox:hover #zen-sidebar-foot-buttons {
    display: flex !important;
    flex-direction: row !important;
    justify-content: space-between !important;
    width: 100% !important;
}

/* Show close button when hovering tabs */
:root:not([zen-sidebar-expanded="true"]) #navigator-toolbox:hover .tabbrowser-tab:hover .tab-close-button {
    display: block !important;
}

/* Pinned tabs spacing adjustments */
:root:not([zen-sidebar-expanded="true"]) #navigator-toolbox:hover .zen-essentials-container .tabbrowser-tab {
    padding: 0 !important;
    gap: 4px !important;
}

:root:not([zen-sidebar-expanded="true"]) #navigator-toolbox:hover .zen-essentials-container .tabbrowser-tab .tab-content {
    padding: 0 !important;
    gap: 4px !important;
    justify-content: center !important;
}

:root:not([zen-sidebar-expanded="true"]) #navigator-toolbox:hover .zen-essentials-container .tabbrowser-tab .tab-icon-image {
    margin: 0 !important;
}

/* Keep folder indentation consistent */
:root:not([zen-sidebar-expanded="true"]) #navigator-toolbox:hover zen-folder,
:root:not([zen-sidebar-expanded="true"]) #navigator-toolbox:hover .tabbrowser-tab:not([zen-glance-tab]) {
    margin-inline-start: var(--zen-folder-indent) !important;
}
